#app[data-help-active="true"]
  position relative
  &::after,
  &[data-modal-open="true"] .modal::after
    content " "
    background-color rgba(16, 16, 16, 0.7)
    width 100vw
    height 100vh
    position fixed
    top 0
    left 0
    z-index 9999
  &[data-modal-open="true"]
    &::after
      z-index 98
    .modal::after
      width 100%
      height 100%

  &:not([data-modal-open]) *[data-help]
  &[data-modal-open="true"] .modal *[data-help]
    box-shadow 0 0 5px rgba($Gray48, 0.6)
    cursor help !important
    position relative
    opacity 1
    z-index 19999

    &::after
      content " "
      border 2px solid rgba($statusBlue, 0)
      border-radius 4px
      width 100%
      height 100%
      position absolute
      top 0
      left 0
      z-index 20000
      cursor help !important
      pointer-events auto !important
      transition border-color 80ms

    &:hover::after
      border-color rgba($statusBlue, 1)

  .help-link
    display block

[data-help-intro-highlight="true"]
  position relative !important
  opacity 1 !important
  z-index 999 !important
  &, & *
    pointer-events none !important
  &::before
    content " "
    border-radius 4px
    box-shadow 0 0 5px 3px $statusBlue
    width 100%
    height 100%
    position absolute
    top 0
    left 0
    z-index 998
    animation intro-highlight 2s ease-in-out infinite

  .tts-editor&
    z-index auto !important
    &::before
      display none

  .modal-container .tts-editor&
    background-color $Gray48
    border 1px solid $Gray128
    border-radius 0.5rem
    margin-left 2rem
    padding 1rem

  & .tts-snippets-row-control-add
    opacity 1 !important

.modal-backdrop[data-intro-key]:not([data-intro-key="intro-help"])
  display flex
  justify-content center
  align-items center
  > *
    position relative !important
    top unset
    left unset
    transform unset

button[data-help] *
button[data-tutorial] *
  pointer-events none

.help-button
  padding 0
  width 2.5rem
  height 2.5rem
  position relative
  z-index 10000
  #app:not([data-help-active="true"]) &:not(:hover):not(:focus)
    background-color transparent
  & *
    pointer-events none
  &:disabled
    z-index 0

.help-link
  display none

.help-modal
  .modal-title
    position relative
    h3
      font-size 1.25rem
  &-back
    width 2rem
    height 2rem
    position absolute
    display flex
    justify-content center
    align-items center
    top 50%
    left 0
    transform translateY(-50%)
    & + h3
      margin-left 3rem
  .modal-body
    line-height 1.4375em
    width 40rem
    font-weight 300
    > :first-child
      margin-top 0
    > :last-child
      margin-bottom 0

    b
      font-weight 600
    hr
      margin 1.25rem 0

    dt i
      display inline-block
      width 1.25rem
    dd
      margin-top 0.25rem
      margin-inline-start 1.5rem
      &:not(:last-child)
        margin-bottom 0.75rem

      li
        color $Gray232
        font-size 0.875rem
        b
          color $Gray248
          //font-size 1rem

    li
      margin-top 0.25rem
      margin-bottom 0.25rem

    summary
      background-color $Gray96
      border-bottom none
      border-radius inherit
      padding 0.75rem 1rem
      margin 0 -1rem
      cursor pointer
    details
      background-color $Gray64
      border 1px solid $Gray128
      border-bottom-width 0
      padding 0 1rem
      &:first-of-type
        border-top-left-radius 4px
        border-top-right-radius 4px
      &:last-of-type
        border-bottom-left-radius 4px
        border-bottom-right-radius 4px
        border-bottom-width 1px
        &[open] summary
          border-bottom-left-radius 0
          border-bottom-right-radius 0
      &[open]
        padding-bottom 1rem
        summary
          border-bottom 1px solid $Gray128

      ul
        padding-inline-start 1rem

  &[data-item="optimize-full"],
  &[data-item="optimize-settings"]
    .modal-body
      width 50rem

  &[data-item="intro-start"] .modal-body
    text-align center
    h1
      margin 1rem 1rem 3rem
    p
      margin 2rem
  &[data-item="intro-editor"]
    flex 0 1 28rem
    min-width 18rem


  &[data-item="intro-help"]
    z-index 1000
    top 4rem
    right 1rem
    left unset
    transform translate(0,0)
    &, .modal-body
      width 30rem

  &-skip:not(:hover)
    color $LinkG

.help-demo
  margin-top 1.5rem
  &-prompt
    text-align center
  &-snippet-add
    &-content
      display flex
      justify-content space-between
      align-items center
      textarea
        border 1px solid $Gray200
        margin-right 1rem
        flex 1 1 auto

      .tts-snippets-row
        &-left
          justify-content center
          flex 0 0 auto
        &-text
          width auto
        &-control-add
          opacity 1
        &-controls
          display none

  &-snippet-text
    width 100%
    padding 3rem 0 4rem
    display flex
    justify-content center
    align-items center
    .snippet
      &, & > *
        font-size 1.25rem
        position relative
      &-space-before,
      &-space-after
        width 0.75rem
      &-prefix,
      &-suffix
        opacity 1
        > span
          opacity 0.6
    &-label
      color $Gray248
      font-size 1rem
      font-weight 300
      position absolute
      opacity 1
      white-space nowrap
      &::after
        content " "
        background-color  $Gray176
        width 1px
        height 1.5rem
        display block
        position absolute

    .snippet-prefix &-label
    .snippet-text &-label
    .snippet-suffix &-label
      left 50%
      transform translate(-50%, 0)
      &:after
        height 1.25rem
        left 50%

    .snippet-prefix &-label
    .snippet-suffix &-label
      bottom calc(100% + 1rem)

    .snippet-space-before &-label
    .snippet-space-after &-label
      top calc(100% + 0.5rem)
      &:after
        top -0.375rem

    .snippet-space-before &-label
      right calc(100% + 1.717rem - 0.375rem)
      &:after
        left calc(100% + 1rem)
        transform rotate(45deg)

    .snippet-text &-label
      top calc(100% + 0.75rem)
      &:after
        bottom calc(100% - 0.25rem)


    .snippet-space-after &-label
      left calc(100% + 1.717rem - 0.375rem)
      &:after
        right calc(100% + 1rem)
        transform rotate(-45deg)

  &-snippet-effects
    width 100%
    display flex
    justify-content center
    align-items center
    .tts-snippets-modal
      &-text
        max-width 20rem
      &-suffix input
        border-top-right-radius 4px
        border-bottom-right-radius 4px

  &-optimize-sample
    &-text
      font-size 0.9375rem
      margin 0.5rem 0 0.5rem 1.5rem
      white-space pre

  &-pause
    &-top
      width 100%
    &-item
      display flex
      justify-content space-between
      align-items center
      width 100%
      margin 1rem 0
      &-text,
      &-button
        background-color $Gray72
        border 1px solid $Gray128
        padding 0.5rem
      &-text
        border-right none
        border-top-left-radius 4px
        border-bottom-left-radius 4px
        flex 1 1 auto
      &-button
        border-top-right-radius 4px
        border-bottom-right-radius 4px
        flex 0 0 auto
        min-width 2rem
    &-player
      &, audio
        width 100%

@keyframes intro-highlight
  0%
    width calc(100% + 0.25rem)
    height calc(100% + 0.25rem)
    transform translate(-0.125rem, -0.125rem)
  50%
    width calc(100% + 0.75rem)
    height calc(100% + 0.75rem)
    transform translate(-0.375rem, -0.375rem)
  100%
    width calc(100% + 0.25rem)
    height calc(100% + 0.25rem)
    transform translate(-0.125rem, -0.125rem)
