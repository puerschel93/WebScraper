//На десктопе у нас анимация по скролу
//этот класс ставится body и html
.no-scroll
  overflow hidden
  height 100vh
  box-sizing border-box

//На десктопах прелоадер меняет свой вид
html.desktop
  section.main.index
    .preloader
      display none
      //поинтер только для десктопов, иначе на тач устройствах будет выделение при клике
      cursor pointer
    video
      opacity 0
      transition opacity 1.5s
      &.__inited
        opacity 1
    .desktop-preloader
      display none
      position absolute
      left 50%
      top 50%
      margin -90px 0 0 -25px
      z-index 2
      .preloader-icon
        width 50px
        height 57px
        margin-bottom 12px
        overflow hidden
        position relative
        &-conic
          position absolute
          left -10%
          top -10%
          width 120%
          height 120%
          background image-url('pages/index/conic-gradient.png') center center no-repeat
          background-size 100%
          animation rotate 4s linear infinite
        &-hex
          position absolute
          left 0
          top 0
          width calc(100% + 2px)
          height calc(100% + 2px)
          margin -1px
          background no-repeat image-url('pages/index/conic-hex.png?ver=3') top center / 100% 100%
          //background red
          box-sizing border-box
        &-percents
          color color-blue
          position relative
          z-index 1
          text-align center
          font-size 11px
          margin-top 22px
      .preloader-text
        font-size 10.5px
        color color-blue
        text-transform uppercase
        text-align center

@keyframes scroll-icon
  from
    top -100%
  to
    top 100%

section.main.index
  color white
  box-sizing border-box
  background black
  //Без рамки снизу глюк - белая полоса
  border-bottom 1px solid black
  .scroll-icon
    position absolute
    right 10px
    top 30px
    width 18px
    height 30px
    border 1px solid color-blue
    border-radius 10px
    z-index 3
    transition opacity .7s
    opacity 0
    &:hover
      text-decoration none
    &.__visible
      opacity 1
    .scroll-icon-line-container
      position relative
      height 8px
      margin-top 6px
      overflow hidden
      .scroll-icon-line
        position absolute
        left 50%
        height 100%
        width 1px
        background color-blue
        animation scroll-icon 2s infinite
    .scroll-icon-text
      text-transform uppercase
      color color-blue
      font-size 1.2em
      transform rotate(90deg)
      margin-top 25px
      white-space nowrap
  //Иконка меню
  .menu-button
    display none
  .desktop-preloader
    display none
  //Иконка вкл/выкл звук
  .sound
    audio
      display none
    .icon
      cursor pointer
      width 25px
      height @width
      position fixed
      top 70px
      left 10px
      background image-url('pages/index/sound-off.svg') no-repeat top center / contain
      z-index 10
    &.__on
      .icon
        background-image: image-url('pages/index/sound-on.svg')
  .arrow-down
    width 40px
    display block
    margin 0 auto
    position relative
    z-index 3
  p
    font-weight 300
    font-size 1.48em
    line-height 1.5
  .title
    font-size 2.74em
    text-transform uppercase
    font-weight 300
    text-align center
    margin-bottom .5em
    &.__absolute
      position absolute
      top 0
      width 100%
      left 0
      z-index 3
  .relative-container
    position relative
    @extend .clearfix
  .preloader
    position absolute
    left 10px
    top 100%
    margin -40px 0 0 0
    background image-url('pages/index/play.png') no-repeat top center / contain
    width 25px
    height @width
    z-index 3
    &.__loading
      background-image image-url('pages/index/preloader.png')
      animation rotate 1s infinite
    &.__play
      background-image image-url('pages/index/play.png')
    &.__replay
      background-image image-url('pages/index/replay.png?ver=1')
    &.__pause
      background-image image-url('pages/index/pause.png')
  .video-container
    margin-left -(container-padding)
    margin-right @margin-left
    margin-top 1em
    position relative
    overflow hidden
    @extend .clearfix
    .top-line, .bottom-line
      position absolute
      left 0
      height 25px
      width 100%
      z-index 2
    .top-line
      top 2em
      background linear-gradient(to top, rgba(black, 0), rgba(black, 1))
    .bottom-line
      top auto
      bottom 0
      background linear-gradient(to bottom, rgba(black, 0), rgba(black, 1))
    video
      background black
      max-width none
      margin 2.5em 0 0 0
      float left
      width 100%
      position relative
      display block
  .text-block
    clear both
    margin-left -(container-padding)
    margin-right @margin-left
    padding 0 container-padding 1em container-padding
  .icons-block
    position absolute
    right 0
    top calc(100% + 1.7em)
    width 110px
    overflow hidden
    z-index 3
    .icons-line
      border-bottom 1px solid rgba(#c6c6c6, .3)
      transform translateX(-100%)
    .icons-row
      padding .5em 0
      position relative
      &.__no-border
        border-bottom none
      .icons-icon
        position absolute
        left 6px
        top 8px
        width 16px
        height auto
        &.__battery
          width 21px
          height 12px
          .__body
            opacity 0
          for num in 1 2 3 4 5 6 7 8 9 10
            .__{num}
              opacity 0
        &.__voltage
          width 19px
          height @width
          top 5px
          transform scale(.1)
          opacity 0
        &.__range
          width 21px
          height 10.7px
          .wheel-left, .wheel-right, .dots, .flag
            opacity 0
        &.__speed
          width 23.3px
          height 16.7px
          left 2px
          .__arrow
            transform-origin 50% 70% 0
            transform rotate(-165deg)
        &.__power
          width 25px
          height 14.3px
          left 2px
          opacity 0
        &.__features
          width 27px
          left 2px
          for num in 1 2 3 4
            .__{num}
              opacity 0
      .icons-title
        font-weight bold
        color #00d2ff
        font-size .95em
        margin-left 37px
        .__number:not(.__no-margin)
          &::after
            content ' '
        &.__pink
          color #ec659e
        &.__yellow
          color #e79d37
      .icons-text
        margin-left 37px
        font-size .95em
        color rgba(#c6c6c6, .6)
        text-transform uppercase
  .button
    text-transform uppercase
    position relative
    display inline-block
    border 1px solid color-blue
    padding .5em 2em
    background no-repeat image-url('main/arrow-right-white.png') calc(100% - 7px) 8px / 6px
    color white
    font-size 1.33em
    transition background .3s
    &:hover
      text-decoration none
      background-color rgba(white, .15)
  //Телефоны альбом
  @media (max-width mup) and (min-aspect-ratio index-album)
    p
      font-size 1.33em
      margin 0
    .video-container
      height 280px
      margin-top 20px
      .top-line
        top 0
      video
        margin-top -15%
    .preloader
      margin-top -60px
    .text-block
      margin-top -20px
      position relative
      z-index 3
    .arrow-down
      margin-top 20px

  //Десктопы
  @media (min-width mup)
    overflow hidden
    .scroll-icon
      width 28px
      height 50px
      border-radius 18px
      border-width 2px
      right 25px
      top 110px
      .scroll-icon-line-container
        height 17px
        .scroll-icon-line
          width 2px
      .scroll-icon-text
        font-size 1.1em
        margin-left -3px
        margin-top calc(100% + 15px)
    .arrow-down
      display none
    .menu-button
      display block
      position fixed
      right 20px
      top 10px
      fill white
      cursor pointer
      width 45px
      height @width
      z-index 12
      &.__hidden
        visibility hidden
    .sound
      .icon
        width 40px
        height @width
        left 90px
        right auto
        top 110px
    .relative-container
      margin-top 1.5em
    .preloader
      top auto
      bottom 70px
      left 90px
      width 40px
      height @width
      margin-top 0
    .video-container
      width initial
      margin-left initial
      margin-right @margin-left
      margin-bottom initial
      .top-line
        top 0
    .text-block
      //Без рамки глюки - какой-то отсутп сверху возникает
      border 1px solid transparent
      padding-top 0
      margin-left 0
      margin-right 0
      z-index 2
      height auto
    .button
      font-size 1.19em
      background-size 10px auto
      background-position calc(100% - 10px) .6em
      padding .5em 3em
      border-width 1.5px
    p
      text-align center
      margin-top 0
      opacity .9
      font-size 1.16em
      max-width 1150px
      margin-left auto
      margin-right auto
      padding-left 2em
      padding-right 2em
      box-sizing border-box
      text-shadow: 1px 1px 2px black
    .title
      font-size 2.38em
      &.__absolute
        top 0
        padding-top 5px
        padding-bottom .8em
        background linear-gradient(to bottom, rgba(black, 1), rgba(black, 1) 1.7em, rgba(black, 0))
    .icons-block
      width 240px
      top 120px
      right 140px
      .icons-line
        border-bottom-width 2px
      .icons-row
        padding 1em 0
        .icons-icon
          width 47px
          left 27px
          top 27px
          &.__battery
            height 25px
            width 47px
          &.__voltage
            width 42px
            height @width
            top 20px
          &.__range
            height 22.5px
            width 47px
          &.__speed
            width 50px
            height 37px
            left 0
            top 17px
          &.__power
            width 54px
            height 30.8px
            left 0
            top 20px
          &.__features
            width 58px
            left 0
            top 20px
        .icons-title
          font-size 1.19em
          margin-left 95px
        .icons-text
          margin-left 95px
          font-size 1.19em