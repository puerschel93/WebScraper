//
//  Variables
//  _____________________________________________

@checkout-payment-method-title__border: @checkout-shipping-method__border;
@checkout-payment-method-title__padding: @checkout-shipping-method__padding;
@checkout-payment-method-title-mobile__padding: 1.5rem;

@checkout-payment-method-content__padding__xl: 2rem;

@checkout-billing-address-details__line-height: 2.5rem;
@checkout-billing-address-details__padding: 0 0 0 2rem;
@checkout-billing-address-form__max-width: @checkout-shipping-address__max-width;

//  Common _____________________________________________
& when (@media-common = true) {
	.checkout-payment-method {
		hr {
			border: 0;
			padding: 0;
			margin: 0;
		}
		.fieldset > br {
			display: none;
		}
		.discount-code {
			.payment-option-title {
				padding-top: 0;
			}
		}
		.step-title {
			border-bottom: 0;
			margin-bottom: 0;
		}

		.payment-method {
			.payment-method-title {
				img {
					float: right;
				}
			}

			&:first-child {
				.payment-method-title {

				}
			}

			.payment-method-content {
				.content.instructions {
					margin-bottom: 15px;
				}

				.message.message-notice,
				.message.message-error {
					clear: both;
					padding-left: 2.5rem;
				}
			}

			&._active {
				.payment-method-content {
					display: block;
				}
			}

			& + .payment-method {

			}

			form {
				&.form-purchase-order {
					margin-bottom: 15px;
				}
			}
		}

		.payment-method-content {
			/*
			> .actions-toolbar {
				> .primary {
					.action {
						&.primary {
							&:extend(.abs-button-l all);
						}
					}
				}
			}
			*/
			/**
			 * @codingStandardsIgnoreStart
			 */

			#po_number {
				margin-bottom: 20px;
			}

			.field.number {
				.control {
					position: relative;
				}

				span.card-brand-icon {
					position: absolute;
					right: 0;
					width: 60px;
					top: 0;

					span {
						height: 50px;
						background-repeat: no-repeat;
						background-position: right 5px center;
						background-size: 50px;
						display: block;
					}
				}
			}

			.field.name {
				input[type="text"] {
					text-transform: uppercase;
				}
			}
		}

		.payment-method-title {
			.lib-css(padding, @checkout-payment-method-title__padding 0);
			margin: 0;

			.payment-icon {
				display: inline-block;
				margin-right: @indent__xs;
				vertical-align: middle;
			}

			.action-help {
				display: inline-block;
				margin-left: @indent__xs;
			}

			&.choice {
				img {
					float: right;
				}
			}
		}

		.payment-method-content {
			display: none;
			.lib-css(padding, 0 0 @indent__base @checkout-payment-method-content__padding__xl);

			.fieldset {
				&:not(:last-child) {
					margin: 0 0 @indent__base;
				}

				.field.number {
					.control {
						position: relative;
					}

					span.card-brand-icon {
						position: absolute;
						right: 0;
						width: 60px;
						top: 0;

						span {
							height: 4rem;
							background-repeat: no-repeat;
							background-position: right 5px center;
							background-size: 4rem;
							display: block;
						}
					}
				}
			}
		}

		.payment-group {
			& + .payment-group {
				.step-title {
					margin: @indent__base 0 0;
				}

				&:not(:first-child) {
					.step-title {
						display: none;
					}
				}
			}
		}

		.field-select-billing,
		.billing-address-form {
			.lib-css(max-width, @checkout-billing-address-form__max-width);
		}

		.billing-address-same-as-shipping-block {
			margin: 0 0 @indent__s;
		}

		.checkout-billing-address {
			margin: 0 0 @indent__base;

			.primary {
				.action-update {
					margin-right: 0;
				}
			}

			.action-cancel {
				&:extend(.abs-action-button-as-link all);
			}

			.billing-address-details {
				.lib-css(line-height, @checkout-billing-address-details__line-height);
				.lib-css(padding, @checkout-billing-address-details__padding);
			}
		}

		.payment-method-note {
			& + .checkout-billing-address {
				margin-top: @indent__base;
			}
		}

		.field-select-billing {
			> .label {
				&:extend(.abs-visually-hidden all);
			}
		}

		.payment-method-iframe {
			background-color: transparent;
			display: none;
			width: 100%;
		}

		.no-payments-block {
			margin: @indent__base 0;
		}

		.payments {
			.legend {
				&:extend(.abs-visually-hidden all);
			}
		}
	}
}

//
//  Mobile
//  _____________________________________________

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__m) {
	.checkout-payment-method {
		.payment-methods {
			.lib-css(margin, 0 -(@checkout-payment-method-title-mobile__padding));
		}

		.step-title {
			.lib-css(padding-left, @checkout-payment-method-title-mobile__padding);
			.lib-css(padding-right, @checkout-payment-method-title-mobile__padding)
		}

		.payment-method-title {
			.lib-css(padding, @checkout-payment-method-title-mobile__padding)
		}

		.payment-method-content {
			.lib-css(padding, 0 @checkout-payment-method-title-mobile__padding @indent__base);

			.fieldset {
				> .field {
					&.date,
					&.cvv {
						float: left;
						width: 45%;
					}

					&.cvv {
						float: right;
					}

					&.name {
						clear: both;
					}
				}
			}
		}

		.checkout-billing-address {
			.action-cancel {
				margin-top: @indent__s;
			}
		}

		.fieldset {
			> br {
				display: none;
			}
		}
	}
}

//
//  Desktop
//  _____________________________________________

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__m) {
	.checkout-payment-method {
		.actions-toolbar {
			.primary {
				float: right;
				margin: 0;
			}
		}

		.fieldset {
			> .field-select-billing {
				> .control {
					float: none;
					width: 100%;
				}
			}
		}

		.payment-method-content {
			padding: 0;

			.fieldset {
				> .field {
					/*
					margin: 0 0 @indent__base;
					padding: 0 2rem 0 0;
					box-sizing: border-box;
					display: inline-block;
					width: 50%;
					float: left;
					*/
					&.date {
						width: 30%;
					}

					&.cvv {
						width: 20%;
					}

					&.choice {
						clear: both;

						&:before {
							padding: 0;
							width: 0;
						}
					}

					&.type {
						.control {
							margin-left: 25.8%;
						}

						&.no-detection {
							.control {
								margin-left: 0;
							}
						}
					}
				}

				.message.message-notice,
				.message.message-error {
					clear: both;
				}
			}
		}
	}

	.checkout-billing-address {
		.action-update {
			float: right;
		}

		.actions-toolbar {
			.action-cancel {
				margin: 6px @indent__base 0 0;
			}
		}
	}
}
