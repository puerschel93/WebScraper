//
//  Variables
//  ---------------------------------------------

@product-name-link__color: @text__color;
@product-name-link__color__active: @text__color;
@product-name-link__color__hover: @text__color;
@product-name-link__color__visited: @text__color;

@product-name-link__text-decoration: none;
@product-name-link__text-decoration__active: @link__hover__text-decoration;
@product-name-link__text-decoration__hover: @link__hover__text-decoration;
@product-name-link__text-decoration__visited: @link__hover__text-decoration;

//
//  Common
//  _____________________________________________

& when (@media-common = true) {
	//  Product Lists
	.products {
		margin: @indent__l 0;

		&-grid .widget-product-grid,
		&.wrapper.grid,
		&.carousel {
			.product {
				&-item {
					div[class^="swatch-opt-"] {
						display: none;
					}

					&:hover {
						div[class^="swatch-opt-"],
						.actions-primary {
							display: block;
							position: absolute;
							top: -15rem;
							width: 100%;
							z-index: 2;
							background: rgba(255, 255, 255, .8);
							webkit-animation: slide-top .5s cubic-bezier(.25, .46, .45, .94) both;
							animation: slide-top .5s cubic-bezier(.25, .46, .45, .94) both;
						}

						.actions-primary {
							top: -3rem;
						}
					}

					&-actions {
						.actions-primary {
							display: none;
							vertical-align: middle;
						}
					}
				}
			}

			.product {
				&-item {
					&-name {
						text-align: center;
						text-transform: uppercase;
						order: 1;
					}

					&-details {
						display: flex;
						flex-direction: column;
						position: relative;
						margin: 0 1rem;
						border-top: 1px solid var(--border-color);
					}

					.price-box {
						order: 2;
						text-align: center;

						span.normal-price {
							order: 1;
						}
					}

					span.installments {
						display: block;

						& > span {
							display: block;
						}
					}

					.tocart {
						width: 100%;
					}
				}
			}
		}

		&.wrapper.list {
			.swatch-attribute {
				display: block;
				flex-direction: unset;
			}
			.swatch-attribute-options {
				justify-content: unset;
				display: block;
			}
		}
	}

	.product {
		&-items {
			&:extend(.abs-reset-list all);
		}

		&-item {
			font-size: 1.2rem;
			vertical-align: top;
			background-color: #FFF;

			.products-grid & {
				display: inline-block;
				margin-left: 2%;
				padding: 0;
				width: calc(~'(100% - 4%) / 2');
			}

			&:nth-child(2n + 1) {
				margin-left: 0;
			}

			&:extend(.abs-add-box-sizing all);

			&-name {
				&:extend(.abs-product-link all);
				-moz-hyphens: auto;
				-ms-hyphens: auto;
				-webkit-hyphens: auto;
				display: block;
				hyphens: auto;
				margin: @indent__xs 0;
				word-wrap: break-word;
			}

			&-info {
				max-width: 100%;
				border-radius: @form-element-input__border-radius;
				border: 1px solid var(--border-color);

				.page-products & {
					width: 100%;
				}
			}

			&-actions {
				> * {
					font-size: 1.4rem;
				}

				.actions-secondary {
					display: none;
					font-size: 1.4rem;
					vertical-align: middle;
					white-space: nowrap;

					> button.action {
						.lib-button-reset();
					}

					> .action {
						line-height: 35px;
						text-align: center;
						width: 35px;

						&:extend(.abs-actions-addto-gridlist all);

						&:before {
							margin: 0;
						}

						span {
							&:extend(.abs-visually-hidden all);
						}
					}
				}
			}

			&-description {
				margin: @indent__m 0;
			}

			.product-reviews-summary {
				display: none;

				.rating-summary {
					margin: 0 4px 0 0;
				}
			}

			.price-box {
				margin: @indent__s 0 @indent__m;

				.price:not(.installments .price) {
					font-weight: @font-weight__semibold;
					font-size: 1.8rem;
					white-space: nowrap;
				}

				.installments .price {
					font-weight: @font-weight__semibold;
				}

				.price-label {
					&:after {
						content: ':';
					}
				}
			}

			.special-price,
			.minimal-price {
				.price {
					.lib-font-size(14);
					font-weight: @font-weight__bold;
				}

				.price-wrapper {
					display: inline-block;
				}

				.price-including-tax + .price-excluding-tax {
					display: block;
				}
			}

			.old-price {
				.price {
					font-weight: @font-weight__regular;
				}
			}

			.regular-price {
				.price-label {
					display: none;
				}
			}

			.minimal-price {
				.price-container {
					display: block;
				}
			}

			.minimal-price-link {
				margin-top: 5px;

				.price-label {
					.lib-css(color, @link__color);
					.lib-font-size(14);
				}

				.price {
					font-weight: @font-weight__regular;
				}
			}

			.minimal-price-link,
			.price-excluding-tax,
			.price-including-tax {
				display: block;
				white-space: nowrap;
			}

			.price-from,
			.price-to {
				margin: 0;
				display: inline-block;
				width: 45%;
			}

			.tocompare {
				.lib-icon-font-symbol(
						@icon-compare-empty
				);
			}

			.tocart {
				white-space: nowrap;
			}
		}
	}

	.price-container {
		/*
		.price {
			.lib-font-size(14);
		}
		 */

		.price-including-tax + .price-excluding-tax,
		.weee {
			margin-top: @indent__xs;
		}

		.price-including-tax + .price-excluding-tax,
		.weee,
		.price-including-tax + .price-excluding-tax .price,
		.weee .price,
		.weee + .price-excluding-tax:before,
		.weee + .price-excluding-tax .price {
			.lib-font-size(11);
		}

		.weee {
			&:before {
				content: '(' attr(data-label) ': ';
			}

			&:after {
				content: ')';
			}

			+ .price-excluding-tax {
				&:before {
					content: attr(data-label) ': ';
				}
			}
		}
	}

	.products-list {
		.product {
			&-item {
				display: table;
				width: 100%;

				&-info {
					display: table-row;
				}

				&-photo {
					display: table-cell;
					padding: 0 @indent__l @indent__l 0;
					vertical-align: top;
					width: 1%;
				}

				&-details {
					display: table-cell;
					vertical-align: top;
				}
			}
		}

		.product-image-wrapper {
			&:extend(.abs-reset-image-wrapper all);
		}
	}
}

//
//  Mobile
//  _____________________________________________
.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__s) {
	.products-list .product {
		&-item {
			table-layout: fixed;

			&-photo {
				padding: 0 @indent__s @indent__s 0;
				width: 30%;
			}
		}
	}

	.products-grid .product-item {
		margin-bottom: 1rem;
	}
}

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__s) {
	.product {
		&-item {
			.products-grid & {
				margin-bottom: @indent__l;
			}

			&-actions {
				display: block;

				.products-grid & {
					margin: @indent__s 0;
				}

				.actions-primary + .actions-secondary {
					> * {
						white-space: normal;
					}
				}
			}
		}
	}

	.products-grid .product-item {
		width: 100%/3;
	}

	.page-products,
	.page-layout-1column,
	.page-layout-3columns,
	.page-products.page-layout-1column,
	.page-products.page-layout-3columns {
		.products-grid {
			.product-item {
				margin-left: 1%;
				padding: 0;
				width: calc(~'(100% - 4%) / 3');

				&:nth-child(3n + 1) {
					margin-left: 0;
				}
			}
		}
	}
}

//
//  Desktop
//  _____________________________________________

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__m) {
	.page-products {
		.products-grid {
			.product-item {
				margin-left: 1%;
				padding: 0;
				width: calc(~'(100% - 4%) / 3');
			}
		}
	}

	.page-products.page-layout-1column {
		.products-grid {
			.product-item {
				width: 100%/4;
			}
		}
	}

	.page-products.page-layout-3columns {
		.products-grid {
			.product-item {
				width: 100%/2;
			}
		}
	}
}

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__l) {
	.products-grid {
		.product-item {
			width: 100%/5;
		}
	}

	.page-layout-1column {
		.products-grid {
			.product-item {
				width: 100%/5;
			}
		}
	}

	.page-layout-3columns {
		.products-grid {
			.product-item {
				width: 100%/4;
			}
		}
	}

	.page-products {
		.products-grid {
			.product-items {
				margin: 0;
			}

			.product-item {
				margin-left: 1%;
				padding: 0;
				width: calc(~'(100% - 4%) / 3');
			}
		}
	}

	.page-products {
		&.page-layout-1column {
			.products-grid {
				.product-item {
					margin-left: 0;
					width: 100%/5;
				}
			}
		}

		&.page-layout-3columns {
			.products-grid {
				.product-item {
					margin-left: 1%;
					width: 32.667%;

					&:nth-child(3n) {
						margin-left: 1%;
					}

					&:nth-child(3n + 1) {
						margin-left: 0;
					}
				}
			}
		}
	}
}